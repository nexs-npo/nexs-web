# 01. Development Philosophy

**Version:** 3.0
**Created:** 2026-02 with Claude Code (Sonnet 4.5)

nexsのWebプロダクト開発における意思決定の基準。

本ドキュメントは二部構成をとる。**Section 1: Principles** は、ツールや技術が変わっても揺るがない不変の原則を定義する。**Section 2: Practices** は、その原則に基づく現時点での実践指針を定義する。

技術的判断に迷った際は、Principlesの優先順位に従うこと。上位の原則を守るために、下位の原則を犠牲にすることは許容される。

---

## Section 1: Principles

### 1st. Safety by Exclusion — 持たざる安全

**「守る」最良の策は、最初から「持たない」ことである。**

- **Liability Minimization:**
  漏洩して困るデータは、自前のデータベースには保存しない。認証や機密情報の管理は、世界最高水準のセキュリティコンプライアンスを持つ外部専門基盤に委任する。

- **Open by Default:**
  セキュリティは「隠すこと」ではなく、公開された状態での堅牢性で担保する。ソースコード、ドキュメント、課題管理は原則として全て公開する。

- **Secretless Architecture:**
  機密情報はコードに含めない。万が一リポジトリが流出しても、システムへのアクセス権は渡さない設計とする。

- **Transparency:**
  障害やインシデントは「隠すべき恥」ではなく「信頼を築くためのコンテンツ」である。原因とプロセスを公開し、透明性をもって信頼を担保する。

---

### 2nd. UX First — 人間のための体験

**コードを書く理由は、使う人がいるからである。**

- **Mobile First:**
  スマートフォンでの体験を最優先する。PC版はモバイル版の拡張に過ぎない。

- **Speed as a Feature:**
  ユーザーの時間を奪わないことは、どんな新機能よりも重要である。派手さより速さを選ぶ。

- **Noise Reduction:**
  思考を妨げる要素——広告、過度なアニメーション、割り込み、無意味な装飾——を排除する。コンテンツそのものに集中できる環境を設計する。

- **Semantics over Decoration:**
  装飾よりも構造を重視する。明確な文章構造は、人間の理解を助け、同時にAIの解釈をも可能にする。

---

### 3rd. AI-Era Architecture — AI時代の設計原則

**人間が全ての行をレビューできない時代に備える。**

- **Isolation over Abstraction:**
  過度な共通化は依存関係の連鎖を生む。コードの重複を恐れず、各機能の独立性を保つことを優先する。

- **Locality of Behavior:**
  一つの関心事に対する理解は、一つの場所で完結すべきである。ファイルを横断して文脈を追わせない。

- **Replaceable Code:**
  コードは「守るべき資産」ではなく「交換可能な部品」として扱う。複雑な抽象化よりも、読んで理解でき、必要なら捨てて書き直せる具体的な記述を優先する。

- **Resilience:**
  部分の死が全体の死を招かない設計とする。特定の機能がダウンしても、システム全体は縮退運転で機能し続ける。

- **Architecture as Guardrail:**
  バグを含んだコードが投入されても全体を破壊しないアーキテクチャを優先する。個々のコードの完璧さより、構造的な安全網を重視する。

---

### 4th. Open & Reproducible — 社会への還元

**コードそのものを公共財とする。**

- **Reproducibility:**
  第三者がこのリポジトリをForkし、ドキュメントの手順のみで同一のシステムを再現できなければならない。特定の環境でしか動かない状態はバグである。

- **Verifiability:**
  オーナーが技術的な良し悪しを判定できなくとも、プロセスを公開することで第三者による検証可能性を担保する。

---

### 5th. Efficiency Trade-offs — 効率性の犠牲

**上位の原則を守るために、効率性を犠牲にすることを許容する。**

- **Accepting Redundancy:**
  ファイルサイズの微増や類似コードの存在は悪ではない。疎結合を維持するための通信オーバーヘッドも許容する。

- **No Premature Optimization:**
  最適化は、実際に問題が計測された後に行う。推測に基づく微調整でコードの可読性を下げてはならない。

- **Machine Power over Cognitive Load:**
  サーバーのリソースより、開発者の認知負荷の低減を優先する。

---

## Section 2: Practices

Principlesに基づく、現時点での実践指針。技術環境の変化に応じて改訂される。

### Safety Practices

- 認証基盤には、SOC 2 / GDPR準拠の外部SaaSを採用する（現行: Clerk）。
- APIキー・接続文字列等の秘密情報は、環境変数で管理し、コードにハードコードしない。
- 内部ネットワークであっても信頼しない設計とする。

### Performance & Security Practices

- 静的生成（SSG）を基本とし、高速な表示速度を担保する（現行: Astro）。
- 動的処理（SSR）は必要最小限に留め、攻撃面と障害の影響範囲を最小化する。

### Quality Assurance Practices

- TypeScriptによる強い型付けと、Biomeによる厳格なLintルールにより、文法レベルのミスを機械的に排除する。
- 認証・決済・データベース操作など、障害が大きな影響を与える箇所には、テストによる品質担保を推奨する。
- AIによるコード生成時は、動作確認とレビューを経てから統合する。

### AI-Readability Practices

- サイトマップ、メタデータを標準化された機械可読フォーマットで提供する。
- AIエージェント向けの構造化情報（現行: /llms.txt）を整備する。
- HTMLはセマンティックなマークアップ（article, section, nav）を使用し、構造化データ（JSON-LD）でプロジェクト情報を機械可読にする。

### Reproducibility Practices

- 環境構築手順はドキュメント化し、第三者が再現可能な状態を維持する。
- Docker等のコンテナ技術を活用し、環境依存を最小化する。

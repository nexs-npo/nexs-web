<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolution Detail - nexs Design Component</title>
    
    <!-- 
      === DESIGN COMPONENT METADATA ===
      ID: GOV-002
      Name: Governance Resolution Detail
      Status: Final
      Description: 個別の議案詳細ページ。議案内容、添付資料、議論ログ、最終議決内容、承認アクションを表示する。
      
      === EDITING GUIDE ===
      1. テキスト変更: "EDITABLE" コメントの箇所を変更してください。
      2. アイコン変更: <i data-lucide="icon-name"></i> を使用してください。
      3. 印刷対応: no-print クラスが付与された要素は印刷時に非表示になります。
      
      === RELATED FILES ===
      - Logic: src/pages/governance/resolutions/[slug].astro
      - Data: src/content/governance/resolutions/*.mdx
    -->

    <!-- Tailwind CSS (CDN for Prototyping) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-black': '#111827', // gray-900
                    },
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans JP', 'sans-serif'],
                        mono: ['Space Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    
    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* アコーディオンのデフォルトマーカーを消す */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        
        /* 印刷時のスタイル（法的保存用） */
        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            details[open] { border: 1px solid #ddd; page-break-inside: avoid; }
            details { display: block !important; } 
            .shadow-lg, .shadow-md, .shadow-sm { box-shadow: none !important; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans pb-32">

    <!-- 
      === HEADER AREA ===
    -->
    <header class="fixed top-0 left-0 w-full bg-white/90 backdrop-blur-md z-50 border-b border-gray-100 no-print">
        <div class="max-w-md mx-auto px-5 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-lg font-bold text-gray-900">nexs Governance</h1>
                <p class="text-[10px] text-gray-500 tracking-wider font-mono">OPEN RESOLUTION PROTOCOL</p>
            </div>
            <!-- COMPONENT: LinkButton (Back) -->
            <a href="/governance" class="flex items-center gap-1 text-xs font-bold text-gray-400 hover:text-gray-900 transition-colors">
                <i data-lucide="x" class="w-4 h-4"></i>
            </a>
        </div>
    </header>

    <main class="pt-24 px-5 max-w-md mx-auto w-full animate-fade-in-up">

        <!-- 
          === META INFO SECTION ===
          議案のステータス、タイトル、起案者情報。
        -->
        <section class="mb-8 pb-6 border-b border-gray-100">
            <div class="flex items-center justify-between mb-4">
                <!-- Status Badge: Reviewing (審議中) -->
                <!-- TODO: ステータスに応じて色とテキストを切り替える (Reviewing: Green, Approved: Gray/Black) -->
                <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded bg-brand-black text-white text-[10px] font-bold tracking-widest uppercase">
                    <span class="w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"></span>
                    Reviewing
                </span>
                <span class="text-xs font-mono text-gray-400">#RES-2026-004</span>
            </div>
            
            <!-- EDITABLE: 議案タイトル -->
            <h1 class="text-2xl font-bold leading-tight mb-4 text-gray-900">
                第2期 地域通貨実証実験における<br>追加予算の承認について
            </h1>

            <div class="flex items-center justify-between text-xs text-gray-500 font-mono">
                <div class="flex items-center gap-2">
                    <div class="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-[10px] font-bold text-gray-600">S</div>
                    <span>Proposed by shinkkhs</span>
                </div>
                <time datetime="2026-02-15">2026.02.15</time>
            </div>
        </section>

        <!-- 
          === PROPOSAL BODY SECTION ===
          議案の本文。
        -->
        <section class="mb-8">
            <div class="mb-6">
                <div class="flex items-center gap-2 mb-2">
                    <span class="block w-1 h-4 bg-gray-400"></span>
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest">Proposal</span>
                </div>
            </div>

            <!-- EDITABLE: 本文 (Markdownレンダリング結果を想定) -->
            <div class="prose prose-sm prose-gray max-w-none text-gray-600 leading-loose text-justify">
                <p class="mb-4">
                    現在進行中のプロジェクト「P-001」において、初期想定を上回るユーザー登録（想定比140%）があり、サーバーリソースが逼迫しています。
                    サービスの安定稼働および、検証データの欠損を防ぐため、予備費よりサーバー増強費用を捻出することを提案します。
                </p>
                
                <div class="bg-gray-50 rounded p-4 text-xs font-mono my-6 border border-gray-100">
                    <h4 class="font-bold text-gray-900 mb-2 border-b border-gray-200 pb-1">予算内訳 (Request)</h4>
                    <div class="flex justify-between mb-1">
                        <span>Database Scale-up</span>
                        <span>¥45,000</span>
                    </div>
                    <div class="flex justify-between mb-1">
                        <span>Storage Reserve</span>
                        <span>¥10,000</span>
                    </div>
                    <div class="flex justify-between font-bold border-t border-gray-200 pt-1 mt-1 text-gray-900">
                        <span>Total</span>
                        <span>¥55,000</span>
                    </div>
                </div>

                <p>
                    なお、本件による全体予算への影響は軽微（予備費の8%）であり、他のプロジェクトへの影響はありません。
                </p>
            </div>
        </section>

        <!-- 
          === ATTACHMENTS SECTION ===
          添付ファイルのアコーディオン。
        -->
        <section class="mb-12">
            <!-- COMPONENT: FileAccordion -->
            <details class="group bg-white border border-gray-200 rounded-lg mb-3 shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-3 cursor-pointer select-none bg-gray-50 hover:bg-gray-100 transition-colors">
                    <div class="flex items-center gap-2">
                        <i data-lucide="file-text" class="w-4 h-4 text-gray-500"></i>
                        <span class="text-xs font-bold text-gray-900">添付資料A: AWS見積書・構成案.pdf</span>
                    </div>
                    <!-- Icon animation via Tailwind group-open -->
                    <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400 transform transition-transform duration-200 group-open:rotate-180"></i>
                </summary>
                
                <div class="p-4 border-t border-gray-100 bg-white">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] text-gray-400 font-mono">FILE SIZE: 1.2MB</span>
                        <a href="#" class="text-xs text-blue-600 font-bold underline hover:text-blue-800">Download ↓</a>
                    </div>
                    <div class="w-full h-24 bg-gray-100 rounded border border-gray-200 flex items-center justify-center text-gray-300 text-xs">
                        [PDF Preview Area]
                    </div>
                </div>
            </details>

            <!-- COMPONENT: FileAccordion -->
            <details class="group bg-white border border-gray-200 rounded-lg mb-3 shadow-sm overflow-hidden">
                <summary class="flex justify-between items-center p-3 cursor-pointer select-none bg-gray-50 hover:bg-gray-100 transition-colors">
                    <div class="flex items-center gap-2">
                        <i data-lucide="bar-chart-2" class="w-4 h-4 text-gray-500"></i>
                        <span class="text-xs font-bold text-gray-900">参考: ユーザー増加推移グラフ</span>
                    </div>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400 transform transition-transform duration-200 group-open:rotate-180"></i>
                </summary>
                <div class="p-4 border-t border-gray-100 bg-white">
                    <p class="text-xs text-gray-600 mb-2">P-001のダッシュボードより出力した直近3ヶ月の推移データです。</p>
                    <ul class="list-disc list-inside text-xs text-gray-500 space-y-1">
                        <li><a href="#" class="text-blue-600 underline">Analytics_Report.csv</a></li>
                    </ul>
                </div>
            </details>
        </section>

        <!-- 
          === PROCESS LOG SECTION ===
          議論の履歴（タイムライン）。
        -->
        <section class="mb-12">
            <div class="mb-6">
                <div class="flex items-center gap-2 mb-2">
                    <span class="block w-1 h-4 bg-gray-400"></span>
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest">Process Log</span>
                </div>
                <p class="text-xs text-gray-400">意思決定に至るまでの議論履歴</p>
            </div>

            <!-- COMPONENT: Timeline -->
            <div class="relative pl-4 border-l border-gray-200 space-y-6">
                
                <!-- Log Item 1 -->
                <div class="relative">
                    <div class="absolute -left-[21px] top-1.5 w-2.5 h-2.5 rounded-full bg-gray-300 border-2 border-white"></div>
                    <div class="text-[10px] font-mono text-gray-400 mb-1">2026.02.16 10:00</div>
                    <div class="bg-white border border-gray-100 rounded-lg p-3 shadow-sm">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs font-bold text-gray-900">質問：コスト対効果について</span>
                            <span class="px-1.5 py-0.5 bg-gray-50 border border-gray-100 rounded text-[9px] text-gray-500 font-mono">Slack</span>
                        </div>
                        <p class="text-xs text-gray-600 leading-relaxed">
                            理事Aより「増強後の耐用期間はどの程度か」との質問。<br>
                            → 起案者より「現在の増加ペースであれば6ヶ月は維持可能」と回答し、了承された。
                        </p>
                    </div>
                </div>

                <!-- Log Item 2 -->
                <div class="relative">
                    <div class="absolute -left-[21px] top-1.5 w-2.5 h-2.5 rounded-full bg-gray-300 border-2 border-white"></div>
                    <div class="text-[10px] font-mono text-gray-400 mb-1">2026.02.17 14:30</div>
                    <div class="bg-white border border-gray-100 rounded-lg p-3 shadow-sm">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xs font-bold text-gray-900">修正：見積もりの精査</span>
                            <span class="px-1.5 py-0.5 bg-gray-50 border border-gray-100 rounded text-[9px] text-gray-500 font-mono">Github PR</span>
                        </div>
                        <p class="text-xs text-gray-600 leading-relaxed">
                            為替レートの影響を考慮し、バッファとして5,000円を追加計上するよう修正提案あり。<br>
                            → 本文の金額を¥50,000から¥55,000へ修正。
                        </p>
                    </div>
                </div>

            </div>
        </section>

        <!-- 
          === FINAL RESOLUTION SECTION ===
          議決内容。最も重要な契約文言。
        -->
        <section class="mb-12">
            <div class="mb-4">
                <div class="flex items-center gap-2 mb-2">
                    <span class="block w-1 h-4 bg-brand-black"></span>
                    <span class="text-xs font-bold text-brand-black uppercase tracking-widest">Final Resolution</span>
                </div>
            </div>

            <!-- COMPONENT: ResolutionCard -->
            <div class="bg-gray-50 border-l-4 border-brand-black p-5 rounded-r-lg">
                <h3 class="text-sm font-bold text-gray-900 mb-3">
                    第2期 地域通貨実証実験 追加予算の件
                </h3>
                <p class="text-xs text-gray-600 leading-relaxed mb-4 text-justify">
                    本件は、審議プロセス（Process Log）における修正案を反映し、以下の通り決議する。
                </p>
                
                <ul class="list-disc list-outside ml-4 mb-4 text-xs text-gray-900 font-bold space-y-1">
                    <li>予備費より金55,000円をシステム増強費として充当することを承認する。</li>
                    <li>執行期限は2026年3月末日までとする。</li>
                </ul>

                <div class="text-[10px] text-gray-400 font-mono text-right">
                    Drafted by: shinkkhs / 2026.02.17
                </div>
            </div>
        </section>

        <!-- 
          === APPROVAL ACTION SECTION ===
          承認状況とアクションボタン。
          no-print: 印刷時は非表示（署名後の紙にはボタンは不要なため）
        -->
        <section class="mb-8 no-print">
            <div class="bg-white border-2 border-brand-black rounded-lg p-5 shadow-lg">
                
                <div class="flex justify-between items-end mb-4 border-b border-gray-100 pb-4">
                    <div>
                        <h3 class="text-sm font-bold text-gray-900">承認状況 (Signatures)</h3>
                        <p class="text-[10px] text-gray-400 mt-1">過半数の承認により可決されます</p>
                    </div>
                    <span class="text-xl font-mono font-bold text-gray-900">2 / 3</span>
                </div>

                <!-- Signatures List -->
                <div class="space-y-3 mb-6">
                    <!-- Approved User -->
                    <div class="flex items-center justify-between text-xs">
                        <div class="flex items-center gap-2">
                            <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500"></i>
                            <span class="font-bold text-gray-900">shinkkhs</span>
                        </div>
                        <span class="font-mono text-gray-400 text-[10px]">02.15 10:00</span>
                    </div>
                    <!-- Approved User -->
                    <div class="flex items-center justify-between text-xs">
                        <div class="flex items-center gap-2">
                            <i data-lucide="check-circle-2" class="w-4 h-4 text-green-500"></i>
                            <span class="font-bold text-gray-900">Member A</span>
                        </div>
                        <span class="font-mono text-gray-400 text-[10px]">02.17 15:20</span>
                    </div>
                    <!-- Pending User (You) -->
                    <!-- TODO: ログイン中のユーザーが未承認の場合のみハイライト表示 -->
                    <div class="flex items-center justify-between text-xs py-2 bg-white rounded border border-gray-200 px-3 shadow-sm transform scale-105 transition-transform">
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
                            <span class="font-bold text-gray-900">You (Board Member B)</span>
                        </div>
                        <span class="font-mono text-orange-600 text-[10px] font-bold animate-pulse">Action Required</span>
                    </div>
                </div>

                <!-- Action Form -->
                <form onsubmit="event.preventDefault(); alert('Approved!');">
                    <div class="flex items-start gap-3 mb-5 bg-gray-50 p-3 rounded border border-gray-100">
                        <input type="checkbox" id="confirm" class="mt-0.5 w-4 h-4 border-gray-300 rounded text-brand-black focus:ring-brand-black">
                        <label for="confirm" class="text-xs text-gray-600 leading-snug cursor-pointer select-none">
                            私は上記の<strong class="text-gray-900">議決内容 (Final Resolution)</strong> に同意し、理事として承認します。<br>
                            <span class="text-gray-400 text-[10px]">※この操作はGitログに記録され、電子署名として扱われます。</span>
                        </label>
                    </div>
                    
                    <button type="submit" class="w-full py-4 bg-brand-black text-white font-bold text-sm rounded-lg hover:bg-gray-800 transition-all flex items-center justify-center gap-2 shadow-lg active:scale-[0.98]">
                        <i data-lucide="pen-tool" class="w-4 h-4"></i>
                        <span>Approve & Sign</span>
                    </button>
                    
                    <button type="button" class="w-full mt-3 py-2 text-gray-400 text-xs font-bold hover:text-red-600 transition-colors">
                        差し戻す (Reject)
                    </button>
                </form>

            </div>
        </section>

        <!-- 
          === FOOTER INFO ===
        -->
        <section class="text-center border-t border-gray-100 pt-8 pb-4">
            <p class="text-[10px] text-gray-400 font-mono">
                Document ID: 8f9a2b3c...<br>
                Last Updated: 2026-02-17 15:20:00 UTC
            </p>
        </section>

    </main>

    <!-- Icons Initialization -->
    <script>
        lucide.createIcons();
    </script>
</body>
</html>

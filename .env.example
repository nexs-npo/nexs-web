# ========================================
# nexs - Environment Variables Template
# ========================================
# Copy this file to `.env` and fill in your actual values.
# NEVER commit the `.env` file to version control.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your actual values
#   npm run dev

# ----------------------------------------
# Clerk (Authentication) — DISABLED BY DEFAULT
# ----------------------------------------
# Clerk handles user authentication and PII management
# as part of the Zero PII Strategy (see docs/01_PHILOSOPHY.md).
#
# Clerk is DISABLED when these keys are not set.
# To enable: uncomment and set your keys from https://dashboard.clerk.com
#
# How it works:
#   - astro.config.mjs checks for PUBLIC_CLERK_PUBLISHABLE_KEY
#   - If present → Clerk integration is loaded (auth UI, middleware, etc.)
#   - If absent  → Clerk is skipped, site runs without authentication
#
# PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_key_here
# CLERK_SECRET_KEY=sk_test_your_key_here
#
# Role Management:
#   Member roles are managed in Clerk Dashboard via publicMetadata.
#   To set a user's role:
#     1. Go to Clerk Dashboard → Users → Select user
#     2. Click "Metadata" tab → "Public" section
#     3. Add: {"role": "board"}
#
#   Available roles:
#     - admin      (システム管理者 - full permissions)
#     - board      (ボードメンバー - governance & approvals)
#     - office     (事務局メンバー - operations & documents)
#     - regular    (正会員 - research & contributions)
#     - supporter  (賛助会員 - reading & comments)
#
#   See: src/lib/roles.ts for type definitions

# ----------------------------------------
# GitHub Token (Audit Log)
# ----------------------------------------
# Personal access token (classic) or fine-grained token with
# "Contents: Read" permission on the nexs-web repository.
# Used by the audit log API to fetch commit history.
# Generate at: https://github.com/settings/tokens
#
# GITHUB_TOKEN=ghp_your_token_here

# ----------------------------------------
# Supabase (Self-Hosted Database)
# ----------------------------------------
# Your self-hosted Supabase instance URL (via Cloudflare Tunnel)
PUBLIC_SUPABASE_URL=https://your-supabase-instance.yourdomain.com
# Anon key (safe to expose in frontend)
PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
# Service role key (KEEP SECRET - server-side only)
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ----------------------------------------
# Site Configuration
# ----------------------------------------
PUBLIC_SITE_URL=https://nexs.or.jp
PUBLIC_SITE_NAME=nexs
PUBLIC_SITE_DESCRIPTION=次世代社会デザイン研究機構

# ----------------------------------------
# Preview Auth (Basic Auth) — DISABLED BY DEFAULT
# ----------------------------------------
# Basic authentication for preview/staging environments.
# Same pattern as Clerk: variable present → active, absent → skipped.
#
# When PREVIEW_AUTH_PASSWORD is set, all pages (except /health) require
# Basic Auth. When unset, the site is publicly accessible (production).
#
# PREVIEW_AUTH_USER=preview
# PREVIEW_AUTH_PASSWORD=your_preview_password_here

# ----------------------------------------
# Resend (Contact Form Email) — DISABLED BY DEFAULT
# ----------------------------------------
# API key from https://resend.com
# When set, the /contact form sends email via Resend API.
# When unset, the form returns 503 (service unavailable).
#
# Requires: nexs.or.jp domain verified in Resend dashboard.
#
# RESEND_API_KEY=re_your_api_key_here

# ----------------------------------------
# Feature Flags (Optional)
# ----------------------------------------
# Enable PWA features
PUBLIC_ENABLE_PWA=true
# Enable service worker for offline support
PUBLIC_ENABLE_OFFLINE=true
# Enable push notifications (future)
PUBLIC_ENABLE_PUSH_NOTIFICATIONS=false
